/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var t=[,t=>{t.exports=require("tree-snap-shot")},(t,e,n)=>{n.r(e),n.d(e,{default:()=>u}),e=n(1);var r=n.n(e),i=n(3);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"branch","master"),o(this,"el",null),o(this,"backup",null),o(this,"curBranchLogs",null),o(this,"allLogs",{})}var e;return(e=[{key:"initBranch",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100;return"string"!=typeof t&&"number"!=typeof t||(this.branch=t),this.allLogs[this.branch]&&this.allLogs[this.branch].init(e),this}},{key:"checkout",value:function(t){return"string"!=typeof t&&"number"!=typeof t||(this.branch=t),this.allLogs[this.branch]?this.curBranchLogs=this.allLogs[this.branch]:this.curBranchLogs=this.allLogs[this.branch]=new i.default,this}},{key:"delBranch",value:function(){this.allLogs[this.branch]&&(this.allLogs[this.branch].initBranch(),delete this.allLogs[this.branch])}},{key:"rm",value:function(t){return this.curBranchLogs.remove(t,(function(t){t.value&&t.value.clear&&t.value.clear()})),this}},{key:"commit",value:function(t){return this.el&&(r().deepEqual(this.backup,this.el)||(null!==(e=(n=this.backup).clear)&&void 0!==e&&e.call(n),this.backup=r().toImmutable(this.el)),this.curBranchLogs.push(t,this.backup)),this;var e,n}},{key:"merge",value:function(t,e){return this}},{key:"log",value:function(t,e){return this}},{key:"status",value:function(){return this}},{key:"diff",value:function(t,e){return this}},{key:"reset",value:function(t){var e,n=this.allLogs[this.branch];return(t=n&&n.search(t))&&r().compare(this.backup,t.value).exportLog((function(t){e=t})).replay(e,this.el,(function(t){console.log(t,"?????")})),this}},{key:"revert",value:function(){}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()).prototype.pipe=function(t){if(t&&"object"!=s(t))throw new Error("只能绑定 typeof == “object” 普通对象或数组");return this.el=t,this.backup=r().toImmutable(t),this.allLogs[this.branch]?this.curBranchLogs=this.allLogs[this.branch]:this.curBranchLogs=this.allLogs[this.branch]=new i.default,this};const u=n},(t,e,n)=>{function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(){function t(t){this.element=t,this.prev=null,this.next=null}var e=0,n=null;this.append=function(r){var i,o;if(r=new t(r),n){for(i=n;i;)i=(o=i).next;(o.next=r).prev=o}else n=r;return e++,!0},this.insert=function(r,i){if(-1<r&&r<=e){i=new t(i);var o,s=n,u=0;if(0===r)n&&((i.next=n).prev=i),n=i;else{for(;u++<r;)s=(o=s).next;r!=e&&((i.next=s).prev=i),(o.next=i).prev=o}return e++,!0}return!1},this.removeAt=function(t){if(-1<t&&t<e){var r,i=n,o=0;if(0===t)(n=n.next).prev=null;else{for(;o++<t;)i=(r=i).next;t===e-1?r.next=null:(r.next=i.next,i.next.prev=r)}return e--,i.element}return!1},this.removeEle=function(t){var r,i=n,o=0;for(i.element===t&&(n=i.next),i=(r=i).next;i;)i.element==t?(r.next=i.next,i.next&&(i.next.prev=r),i=i.next,e--,o++):i=(r=i).next;return o},this.remove=function(){if(0===e)return!1;var t,r=n;if(1===e)return n=null,e--,r.element;for(;r.next;)r=(t=r).next;return t.next=null,e--,r.element},this.removeAll=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;0<=t&&t<e;)this.remove();return!0},this.indexOf=function(t){for(var r=n,i=0;r&&i<e;){if(r.element===t)return i;r=r.next,i++}return!1},this.prev=function(t){if(t){var r=n,i=0;if(n&&t===n.element)return n.element;for(;r&&i<e;){if(r.next.element===t)return r.element;r=r.next,i++}return!1}},this.next=function(t){if(t){for(var r=n,i=0;r&&i<e;){if(r.element===t)return(r.next||r).element;r=r.next,i++}return!1}},this.isEmpty=function(){return 0===e},this.size=function(){return e},this.getHead=function(){return n.element},this.getTail=function(){for(var t,e=n;e;)e=(t=e).next;return t.element}}n.r(e),n.d(e,{default:()=>o}),(e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"max",10),r(this,"storage",[]),r(this,"keyIdx",{}),r(this,"size",0),r(this,"linkList",void 0),r(this,"currentItem",null),this.linkList=new i}).prototype.init=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;this.storage.length=0,this.keyIdx={},this.size=0,this.max=Math.max(t,1),this.linkList.removeAll()},e.prototype.remove=function(t,e){if(void 0!==this.keyIdx[t]){var n,r=this.keyIdx[t],i=this.storage[r];for(n in e&&e(i),this.linkList.removeEle(i),this.storage.splice(r,1),delete this.keyIdx[t],this.keyIdx)this.keyIdx[n]>r&&this.keyIdx[n]--;return this.size=this.storage.length,this.currentItem===i&&(this.currentItem=this.storage[Math.min(r,this.size-1)]),i}},e.prototype.update=function(t,e){if(void 0===this.keyIdx[t])return this.push(t,e);var n,r=this.keyIdx[t],i=this.storage[r];for(n in i.value=e,this.storage.splice(r,1),this.storage.push(i),this.keyIdx)this.keyIdx[n]>r&&this.keyIdx[n]--;return this.currentItem=i,this.keyIdx[t]=this.storage.length-1,i},e.prototype.search=function(t){return this.currentItem=this.storage[this.keyIdx[t]],this.currentItem},e.prototype.push=function(t,e){if(void 0!==this.keyIdx[t])return this.update(t,e);var n={key:t,value:e};return this.linkList.append(n),this.storage.push(n),this.storage.length>this.max&&(e=this.first(),this.remove(e.key)),this.size=this.storage.length,this.keyIdx[t]=this.storage.length-1,this.currentItem=n},e.prototype.prev=function(t){return this.search(t),this.linkList.prev(this.currentItem)},e.prototype.next=function(t){return this.search(t),this.linkList.next(this.currentItem)},e.prototype.last=function(){return this.storage[this.storage.length-1]},e.prototype.first=function(){return this.storage[0]};const o=e}],e={};function n(r){var i=e[r];return void 0!==i||(i=e[r]={exports:{}},t[r](i,i.exports,n)),i.exports}n.amdO={},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{n.r(r);var t,e,i=n(2);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=void 0,e=function(t){var e=i.default;t.default=e},"object"===("undefined"==typeof exports?"undefined":o(exports))?e(exports):"function"==typeof define&&n.amdO?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).DataTimeLine={})})()})();