/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var t=[,t=>{t.exports=require("tree-snap-shot")},(t,e,r)=>{r.r(e),r.d(e,{default:()=>a}),e=r(1);var o=r.n(e),n=r(3);function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"branch","master"),i(this,"el",null),i(this,"backup",null),i(this,"curBranchLogs",{}),i(this,"allLogs",{})}var e;return(e=[{key:"init",value:function(t){return"string"!=typeof t&&"number"!=typeof t||(this.branch=t),null!==(t=this.backup)&&void 0!==t&&t.clear&&this.backup.clear(),this.backup=null,this.el=null,this.curBranchLogs=this.allLogs[this.branch]=new n.default,this}},{key:"rm",value:function(t){this.curBranchLogs.remove(t)}},{key:"commit",value:function(t){return this.el&&(o().deepEqual(this.backup,this.el)||(null!==(e=(r=this.backup).clear)&&void 0!==e&&e.call(r),this.backup=o().toImmutable(this.el)),this.curBranchLogs.push(t,this.backup)),this;var e,r}},{key:"merge",value:function(){}},{key:"log",value:function(t){}},{key:"status",value:function(){}},{key:"diff",value:function(){}},{key:"reset",value:function(t,e){var r;t=(e=this.allLogs[void 0===e?this.branch:e])&&e.search(t),console.log(t,"??????"),t&&o().compare(this.backup,t.value).exportLog((function(t){r=t})).replay(r,this.el)}},{key:"revert",value:function(){}}])&&function(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(t.prototype,e),t}()).prototype.pipe=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"master";if(t&&"object"!=s(t))throw new Error("只能绑定 typeof == “object” 普通对象或数组");if(!e||"string"!=typeof e&&"number"!=typeof e)throw new Error("branchId类型只能是(string/number)");return this.branch=e,this.el=t,this.backup=o().toImmutable(t),this.allLogs[this.branch]?this.curBranchLogs=this.allLogs[this.branch]:this.curBranchLogs=this.allLogs[this.branch]=new n.default,this};const a=r},(t,e,r)=>{function o(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)),o}function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(e),r.d(e,{default:()=>s}),(e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"max",10),i(this,"storage",[]),i(this,"keyIdx",{}),i(this,"size",0)}).prototype.init=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;this.storage=[],this.keyIdx={},this.size=0,this.max=Math.max(t,1)},e.prototype.remove=function(t){if(void 0===this.keyIdx[t])return!1;var e,r=this.keyIdx[t];for(e in this.storage.splice(r,1),delete this.keyIdx[t],this.keyIdx)this.keyIdx[e]>r&&this.keyIdx[e]--;return this.size=this.storage.length,!0},e.prototype.update=function(t,e){return void 0!==this.keyIdx[t]&&(this.remove(t),delete this.keyIdx[t],this.push(t,e),!0)},e.prototype.search=function(t){if(void 0!==this.keyIdx[t])return n(n({},this.storage[this.keyIdx[t]]),{},{index:this.keyIdx[t]})},e.prototype.push=function(t,e){void 0===this.keyIdx[t]?(this.storage.push({timestamp:(new Date).getTime(),key:t,value:e}),this.storage.length>this.max&&this.remove(this.first().key),this.size=this.storage.length):this.update(t,e),this.keyIdx[t]=this.storage.length-1},e.prototype.last=function(){return this.storage[this.storage.length-1]},e.prototype.first=function(){return this.storage[0]};const s=e}],e={};function r(o){var n=e[o];return void 0!==n||(n=e[o]={exports:{}},t[o](n,n.exports,r)),n.exports}r.amdO={},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{r.r(o);var t,e,n=r(2);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=void 0,e=function(t){var e=n.default;t.default=e},"object"===("undefined"==typeof exports?"undefined":i(exports))?e(exports):"function"==typeof define&&r.amdO?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).DataTimeLine={})})()})();